<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" 
            content="width=device-width, initial-scale=1.0">
        <title>Favorite Color screen</title>
    </head>

<body>
    <h2>Please select your favorite color from the list below.</h2>
    <p>(If none of these represent your favorite color, choose the closest one to it)</p>
    <form id="color-form">
        <label for="color-question"></label><br>
    
        <!-- Primary Colors with color boxes -->

        <input type="radio" id="green" name="color" value="Green">
        <label for="green">
            <span style="display: inline-block; width: 20px; height: 20px; background-color: green; margin-right: 10px; border: 1px solid #ccc;"></span>
            Green
        </label><br>
    
        <input type="radio" id="teal" name="color" value="Teal">
        <label for="teal">
            <span style="display: inline-block; width: 20px; height: 20px; background-color: teal; margin-right: 10px; border: 1px solid #ccc;"></span>
            Teal
        </label><br>
    
        <input type="radio" id="turquoise" name="color" value="Turquoise">
        <label for="turquoise">
            <span style="display: inline-block; width: 20px; height: 20px; background-color: turquoise; margin-right: 10px; border: 1px solid #ccc;"></span>
            Turquoise
        </label><br>

        <input type="radio" id="seafoamgreen" name="color" value="Seafoam Green">
        <label for="seafoamgreen">
            <span style="display: inline-block; width: 20px; height: 20px; background-color: #9FE2BF; margin-right: 10px; border: 1px solid #ccc;"></span>
            Seafoam Green
        </label><br>
    
        <!-- Other Colors -->
        <input type="radio" id="lavender" name="color" value="Lavender">
        <label for="lavender">
            <span style="display: inline-block; width: 20px; height: 20px; background-color: lavender; margin-right: 10px; border: 1px solid #ccc;"></span>
            Lavender
        </label><br>
    
        <input type="radio" id="lightblue" name="color" value="Light Blue">
        <label for="lightblue">
            <span style="display: inline-block; width: 20px; height: 20px; background-color: lightblue; margin-right: 10px; border: 1px solid #ccc;"></span>
            Light Blue
        </label><br>

        <input type="radio" id="blue" name="color" value="Blue">
        <label for="blue">
            <span style="display: inline-block; width: 20px; height: 20px; background-color: blue; margin-right: 10px; border: 1px solid #ccc;"></span>
            Blue
        </label><br>
    
        <input type="radio" id="darkblue" name="color" value="Dark Blue">
        <label for="darkblue">
            <span style="display: inline-block; width: 20px; height: 20px; background-color: darkblue; margin-right: 10px; border: 1px solid #ccc;"></span>
            Dark Blue
        </label><br>
    
        <input type="radio" id="purple" name="color" value="Purple">
        <label for="purple">
            <span style="display: inline-block; width: 20px; height: 20px; background-color: purple; margin-right: 10px; border: 1px solid #ccc;"></span>
            Purple
        </label><br>

        <input type="radio" id="fuchsia" name="color" value="Fuchsia">
        <label for="fuchsia">
            <span style="display: inline-block; width: 20px; height: 20px; background-color: fuchsia; margin-right: 10px; border: 1px solid #ccc;"></span>
            Fuchsia
        </label><br>
    
        <input type="radio" id="pink" name="color" value="Pink">
        <label for="pink">
            <span style="display: inline-block; width: 20px; height: 20px; background-color: pink; margin-right: 10px; border: 1px solid #ccc;"></span>
            Pink
        </label><br>
            
        <input type="radio" id="yellow" name="color" value="Yellow">
        <label for="yellow">
            <span style="display: inline-block; width: 20px; height: 20px; background-color: yellow; margin-right: 10px; border: 1px solid #ccc;"></span>
            Yellow
        </label><br>

        <input type="radio" id="orange" name="color" value="Orange">
        <label for="orange">
            <span style="display: inline-block; width: 20px; height: 20px; background-color: orange; margin-right: 10px; border: 1px solid #ccc;"></span>
            Orange
        </label><br>

        <!-- More Common Colors -->
        <input type="radio" id="red" name="color" value="Red">
        <label for="red">
            <span style="display: inline-block; width: 20px; height: 20px; background-color: red; margin-right: 10px; border: 1px solid #ccc;"></span>
            Red
        </label><br>

        <input type="radio" id="crimson" name="color" value="Crimson">
        <label for="crimson">
            <span style="display: inline-block; width: 20px; height: 20px; background-color: #DC143C; margin-right: 10px; border: 1px solid #ccc;"></span>
            Crimson
        </label><br>

    
        <input type="radio" id="brown" name="color" value="Brown">
        <label for="brown">
            <span style="display: inline-block; width: 20px; height: 20px; background-color: brown; margin-right: 10px; border: 1px solid #ccc;"></span>
            Brown
        </label><br>
    
        <input type="radio" id="black" name="color" value="Black">
        <label for="black">
            <span style="display: inline-block; width: 20px; height: 20px; background-color: black; margin-right: 10px; border: 1px solid #ccc;"></span>
            Black
        </label><br>
    
        <input type="radio" id="gray" name="color" value="Gray">
        <label for="gray">
            <span style="display: inline-block; width: 20px; height: 20px; background-color: gray; margin-right: 10px; border: 1px solid #ccc;"></span>
            Gray
        </label><br>

        <input type="radio" id="khaki" name="color" value="Khaki">
        <label for="khaki">
            <span style="display: inline-block; width: 20px; height: 20px; background-color: #C3B091; margin-right: 10px; border: 1px solid #ccc;"></span>
            Khaki
        </label><br><br><br>

        <button type="button" id="submitColor">Submit</button>
    </form>
    

                <!-- Firebase and JavaScript -->
             
                <!-- <script type="module" src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js"></script> -->
                <script type="module" src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database.js"></script>
                <script type="module">
                    // Import the functions you need from the SDKs you need
                    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
                    //import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-analytics.js";
                    import { getDatabase, ref, set, push, update } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js";
    
                    // Function to submit the favorite color and navigate to the break page
                    //import { getDatabase, ref, update } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js";
                    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
                    const firebaseConfig = {
                        apiKey: "...",
                        authDomain: "...",
                        databaseURL: "...",
                        projectId: "...",
                        storageBucket: "...",
                        messagingSenderId: "...",
                        appId: "...",
                        measurementId: "...",
                    };
                
                    // Initialize Firebase
                    const app = initializeApp(firebaseConfig);
                    const db = getDatabase(app);

                    // Function to submit the favorite color and navigate to the break page
                    // Function to submit the favorite color and navigate to the break page
                    function submitFavoriteColor() {
                        const colorSelect = document.querySelector('input[name="color"]:checked');
                        if (!colorSelect) {
                            alert("Please select a color before proceeding.");
                            return;
                        }
                        const favoriteColor = colorSelect.value;
                        sessionStorage.setItem('favoriteColor', favoriteColor);

                        const participantID = sessionStorage.getItem('participantID');
                        console.log("Retrieved Participant ID:", participantID);  // Log to verify ID retrieval

                        if (!participantID) {
                            alert("Participant ID not found.");
                            return;
                        }

                        const db = getDatabase();
                        const participantRef = ref(db, `Participants/${participantID}`);

                        update(participantRef, { favoriteColor })
                            .then(() => {
                                console.log("Favorite color saved successfully!");
                                // Redirect to break page after saving
                                window.location.href = 'break.html?duration=7000&next=experiment.html';
                            })
                            .catch(error => {
                                console.error("Error saving favorite color:", error);
                            });
                    }

                    document.getElementById("submitColor").addEventListener("click", submitFavoriteColor);


                </script>

</body>
</html>